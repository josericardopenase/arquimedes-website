---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../consts';
---

<header>
	<nav class="fixed w-full z-30">
		<nav class="w-full flex border-b-[0.07rem] items-center border-gray-200 p-5 justify-between px-3 md:px-10 bg-white dark:bg-gray-900 dark:border-gray-700">
			<h2 class="font-extrabold text-transparent text-md md:text-xl bg-clip-text bg-gradient-to-r from-blue-600 to-green-400 dark:from-blue-400 dark:to-green-200">
				<a href="/">{SITE_TITLE}</a>
			</h2>
			<div class="flex items-center gap-4">
				<!-- Desktop Header -->
				<div class="hidden md:flex gap-10 items-center">
					<div class="flex gap-10 items-center">
						<HeaderLink class="text-md text-gray-500 dark:text-gray-300" href="/">Home</HeaderLink>
						<HeaderLink class="text-md text-gray-500 dark:text-gray-300" href="/docs">Documentation</HeaderLink>
						<HeaderLink class="text-md text-gray-500 dark:text-gray-300" href="/contributors">Contributors</HeaderLink>
					</div>
					<div class="flex items-center gap-2">
						<button id="darkModeToggle" class="focus:outline-none text-sm bg-gray-100 dark:bg-gray-800 w-[35px] h-[35px] flex justify-center items-center rounded-xl">
							<i id="sunIcon" class="w-[20px] h-[20px] text-gray-500" data-feather="moon"></i>
							<i id="moonIcon" class="w-[20px] h-[20px] text-gray-500 hidden" data-feather="sun"></i>
						</button>
						<a target="_blank" href="https://github.com/josericardopenase/arquimedes" class="bg-gray-100 dark:bg-gray-800 w-[35px] h-[35px] flex justify-center items-center rounded-xl">
							<svg viewBox="0 0 16 16" aria-hidden="true" width="22" height="22" astro-icon="social/github">
								<path fill="#535354" class="dark:fill-gray-400" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
							</svg>
						</a>
					</div>
				</div>

				<!-- Hamburguer Menu and Buttons -->
				<div class="md:hidden flex items-center gap-6">
					<button id="darkModeToggleMobile" class="focus:outline-none text-sm bg-gray-100 dark:bg-gray-800 w-[35px] h-[35px] flex justify-center items-center rounded-xl">
						<i id="sunIcon" class="w-[20px] h-[20px] text-gray-500" data-feather="moon"></i>
						<i id="moonIcon" class="w-[20px] h-[20px] text-gray-500 hidden" data-feather="sun"></i>
					</button>
					<a target="_blank" href="https://github.com/josericardopenase/arquimedes" class="bg-gray-100 dark:bg-gray-800 w-[35px] h-[35px] flex justify-center items-center rounded-xl">
						<svg viewBox="0 0 16 16" aria-hidden="true" width="22" height="22" astro-icon="social/github">
							<path fill="#535354" class="dark:fill-gray-400" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
						</svg>
					</a>
					<div class="flex flex-col gap-[3px] alert">
						<div class="w-[18px] h-[2px] bg-gray-800 dark:bg-gray-200"></div>
						<div class="w-[18px] h-[2px] bg-gray-800 dark:bg-gray-200"></div>
						<div class="w-[18px] h-[2px] bg-gray-800 dark:bg-gray-200"></div>
					</div>
				</div>
			</div>
		</nav>

		<!-- Mobile Links -->
		<div class="bg-white dark:bg-gray-800 p-5 border-b-[0.07rem] dark:border-gray-700 flex flex-col hidden obscure gap-3">
			<HeaderLink class="text-md text-gray-500 dark:text-gray-300" href="/">Home</HeaderLink>
			<HeaderLink class="text-md text-gray-500 dark:text-gray-300" href="/docs">Documentation</HeaderLink>
			<HeaderLink class="text-md text-gray-500 dark:text-gray-300" href="/contributors">Contributors</HeaderLink>
		</div>
	</nav>
</header>

<script>
	/* @ts-ignore */
	feather.replace();

	const buttons = document.querySelectorAll('div.alert');
	const obscure = document.querySelectorAll('div.obscure');

	buttons.forEach((button) => {
		button.addEventListener('click', () => {
			obscure.forEach((x) => {
				x.classList.toggle("hidden");
			});
		});
	});

	const toggleButtons = document.querySelectorAll('#darkModeToggle, #darkModeToggleMobile');
	const sunIcon = document.querySelectorAll('#sunIcon');
	const moonIcon = document.querySelectorAll('#moonIcon');
	const htmlElement = document.documentElement;

	document.addEventListener('DOMContentLoaded', () => {
		const isDarkMode = localStorage.getItem('theme') === 'dark';
		if (isDarkMode) {
			htmlElement.classList.add('dark');
			sunIcon.forEach(icon => icon.classList.add('hidden'));
			moonIcon.forEach(icon => icon.classList.remove('hidden'));
		} else {
			htmlElement.classList.remove('dark');
			sunIcon.forEach(icon => icon.classList.remove('hidden'));
			moonIcon.forEach(icon => icon.classList.add('hidden'));
		}
	});

	toggleButtons.forEach((button) => {
		button.addEventListener('click', () => {
			const isDarkMode = htmlElement.classList.toggle('dark');
			localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');

			sunIcon.forEach(icon => icon.classList.toggle('hidden'));
			moonIcon.forEach(icon => icon.classList.toggle('hidden'));
		});
	});
</script>
